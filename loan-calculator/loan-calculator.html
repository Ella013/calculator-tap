<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PJBNVGXSZ8"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-PJBNVGXSZ8');
    </script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5619502783367221"
         crossorigin="anonymous"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Calculator | Free Online Tool | Calculator Tap</title>
    <meta name="description" content="Free online loan calculator to estimate your monthly payments, total interest, and full loan cost. Perfect for personal, auto, and home loans with instant results.">
    <meta name="keywords" content="loan calculator, monthly payment calculator, loan interest calculator, amortization calculator, personal loan calculator, auto loan calculator">
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://calculatortap.com/loan-calculator/loan-calculator.html">
    <meta property="og:title" content="Loan Calculator | Free Online Tool | Calculator Tap">
    <meta property="og:description" content="Calculate your loan payments and interest with our free loan calculator.">
    <meta property="og:image" content="../calculator tap logo.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://calculatortap.com/loan-calculator/loan-calculator.html">
    <meta property="twitter:title" content="Loan Calculator | Free Online Tool | Calculator Tap">
    <meta property="twitter:description" content="Calculate your loan payments and interest with our free loan calculator.">
    <meta property="twitter:image" content="../calculator tap logo.png">

    <style>
        /* Reset & Base Styles */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
        }
        
        /* Header Styles */
        .header {
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo-link {
            text-decoration: none;
            color: inherit;
            transition: opacity 0.2s;
        }
        
        .logo-link:hover {
            opacity: 0.8;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #2c3e50;
        }
        
        /* Main Nav Styles */
        .main-nav {
            display: flex;
            gap: 1.5rem;
        }
        
        .nav-link {
            color: #2c3e50;
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.3s ease;
        }
        
        .nav-link:hover {
            color: #3498db;
        }
        
        .nav-link i {
            font-size: 1.1rem;
        }
        
        /* Container Styles */
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 1.5rem 1rem;
        }
        
        /* Main Page Layout */
        .page-layout {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 330px;
            gap: 1.5rem;
            padding: 1rem;
        }
        
        /* Calculator Column */
        .calculator-column {
            width: 100%;
        }
        
        /* Sidebar Column */
        .sidebar-column {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        /* Advertisement Style */
        .advertisement {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            height: 300px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        /* Other Calculators Section */
        .other-calculators {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            padding: 1rem;
        }
        
        .other-calculators h3 {
            color: #2c3e50;
            font-size: 1.2rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5rem;
        }
        
        .calculator-list {
            list-style: none;
        }
        
        .calculator-list li {
            margin-bottom: 0.5rem;
        }
        
        .calculator-list a {
            display: block;
            padding: 0.5rem;
            text-decoration: none;
            color: #3498db;
            transition: background-color 0.2s;
            border-radius: 4px;
        }
        
        .calculator-list a:hover {
            background-color: #f8f9fa;
        }
        
        /* Calculator Main Styles */
        .calculator-main {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }
        
        .calculator-header {
            grid-column: 1 / -1;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .calculator-title {
            font-size: 1.75rem;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }
        
        .calculator-description {
            color: #7f8c8d;
            max-width: 600px;
            margin: 0 auto;
            font-size: 0.9rem;
        }

        /* Form Styles */
        .calculator-form {
            grid-column: 1;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            color: #555;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9rem;
            transition: border-color 0.2s;
            background-color: white;
            height: 45px;
        }
        
        .form-group input:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .input-group {
            position: relative;
            width: 100%;
        }
        
        .currency-symbol {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #555;
            font-weight: 500;
            pointer-events: none;
        }
        
        .input-group .input-field {
            padding-left: 25px;
        }
        
        /* Results Section */
        .results-section {
            grid-column: 2;
            padding: 1rem;
            background-color: #f8fafc;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
        }
        
        .results-header {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 0.5rem;
            text-align: center;
            padding-top: 0.5rem;
        }
        
        .chart-container {
            width: 100%;
            height: 180px;
            margin: 0 auto 0.5rem;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #eee;
            border-radius: 4px;
            position: relative;
        }
        
        /* Chart Legend Styles */
        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 1rem;
            font-size: 0.75rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            color: #7f8c8d;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 4px;
            display: inline-block;
        }
        
        .legend-color.principal {
            background-color: #3498db;
        }
        
        .legend-color.interest {
            background-color: #e74c3c;
        }
        
        .chart-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .results-summary {
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .monthly-amount {
            font-size: 2.5rem;
            color: #2ecc71;
            font-weight: 700;
            display: block;
            margin-bottom: 0.25rem;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            padding: 0.2rem 0;
        }
        
        .monthly-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            display: block;
        }
        
        .results-details {
            margin-top: 1rem;
            border-top: 1px solid #eee;
            padding-top: 0.5rem;
        }
        
        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 0.4rem 0;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
        }
        
        .result-row:last-child {
            border-bottom: none;
        }
        
        .result-label {
            color: #7f8c8d;
        }
        
        .result-value {
            font-weight: 500;
            color: #2c3e50;
        }
        
        /* Calculate Button */
        .calculate-btn {
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.75rem 1.25rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 1rem;
            width: 100%;
        }
        
        .calculate-btn:hover {
            background-color: #2980b9;
        }
        
        /* Explanation Section Styles */
        .explanation-section {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .explanation-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .explanation-text h3 {
            color: #3498db;
            margin: 1.5rem 0 0.75rem;
            font-size: 1.125rem;
        }
        
        .explanation-text p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .explanation-text ul {
            padding-left: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .explanation-text li {
            margin-bottom: 0.5rem;
        }
        
        /* Footer Styles */
        .footer {
            background-color: #2c3e50;
            color: white;
            padding: 2rem 0;
            margin-top: 4rem;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            text-align: center;
        }
        
        .footer-links {
            margin-bottom: 1rem;
        }
        
        .footer-links a {
            color: white;
            text-decoration: none;
            margin: 0 1rem;
            transition: color 0.3s ease;
        }
        
        .footer-links a:hover {
            color: #3498db;
        }
        
        .copyright {
            font-size: 0.9rem;
            color: #bdc3c7;
        }
        
        /* 모바일 메뉴 스타일 추가 */
        .hamburger-menu {
            display: none;
            font-size: 1.8rem;
            color: #333;
            cursor: pointer;
        }
        
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.95);
            z-index: 1000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-nav.active {
            transform: translateY(0);
            display: flex;
        }
        
        .mobile-nav-link {
            display: block;
            font-size: 1.5rem;
            padding: 1rem;
            color: #333;
            text-decoration: none;
            margin: 0.5rem 0;
            transition: color 0.2s;
        }
        
        .mobile-nav-link:hover {
            color: #3498db;
        }
        
        .close-menu {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            font-size: 2rem;
            color: #333;
            cursor: pointer;
        }
        
        /* Responsive styles */
        @media (max-width: 900px) {
            .page-layout {
                grid-template-columns: 1fr;
            }
            
            .calculator-column {
                order: 1;
            }
            
            .sidebar-column {
                order: 2;
            }
        }
        
        @media (max-width: 768px) {
            .main-nav {
                display: none;
            }
            
            .hamburger-menu {
                display: block;
            }
            
            .calculator-main {
                grid-template-columns: 1fr;
            }
            
            .results-section {
                grid-column: 1;
                margin-top: 1rem;
            }
            
            .calculator-form {
                grid-column: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <a href="../index.html" class="logo-link" style="display: flex; align-items: center; text-decoration: none;">
                    <img src="../calculator tap logo.png" alt="Calculator Tap" style="height: 40px; width: auto;">
                    <h1 style="margin-left: 10px; color: #2c3e50;">Calculator Tap</h1>
                </a>
            </div>
            <nav class="main-nav">
                <a href="../index.html" class="nav-link"><i class="fas fa-home"></i> Home</a>
            </nav>
            <div class="hamburger-menu" id="hamburgerMenu">
                <i class="fas fa-bars" aria-hidden="true"></i>
            </div>
        </div>
    </header>

    <!-- 모바일 내비게이션 추가 -->
    <div class="mobile-nav" id="mobileNav">
        <div class="close-menu" id="closeMenu">
            <i class="fas fa-times" aria-hidden="true"></i>
        </div>
        <a href="../index.html" class="mobile-nav-link"><i class="fas fa-home"></i> Home</a>
        <a href="../loan-calculator/loan-calculator.html" class="mobile-nav-link"><i class="fas fa-money-bill"></i> Loan Calculator</a>
        <a href="../Mortgage-Qualification-Calculator/mortgage-qualification.html" class="mobile-nav-link"><i class="fas fa-home"></i> Mortgage Calculator</a>
        <a href="../paycheck-calculator/paycheck-calculator.html" class="mobile-nav-link"><i class="fas fa-wallet"></i> Paycheck Calculator</a>
        <a href="../payoff-calculator/payoff-calculator.html" class="mobile-nav-link"><i class="fas fa-money-bill-wave"></i> Debt Payoff Calculator</a>
        <a href="../blog/index.html" class="mobile-nav-link"><i class="fas fa-blog"></i> Blog</a>
    </div>

    <div class="container">
        <div class="page-layout">
            <div class="calculator-column">
                <!-- Main Content -->
                <main class="calculator-main">
                    <div class="calculator-header">
                        <h1 class="calculator-title" data-translate="calculators.loan.title">Loan Calculator</h1>
                        <p class="calculator-description" data-translate="calculators.loan.description">Calculate monthly payments, total interest, and payoff timeline for any type of loan. Perfect for personal loans, auto loans, and student loans.</p>
                    </div>
                    
                    <div class="calculator-form">
                        <div class="form-group">
                            <label for="loanAmount" data-translate="calculators.loan.loanAmount">Loan Amount ($)</label>
                            <div class="input-group">
                                <span class="currency-symbol">$</span>
                                <input type="text" id="loanAmount" placeholder="Enter loan amount" data-translate-attr="calculators.loan.placeholderAmount" class="input-field" inputmode="numeric">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="interestRate" data-translate="calculators.loan.interestRate">Annual Interest Rate (%)</label>
                            <input type="number" id="interestRate" placeholder="Enter interest rate" data-translate-attr="calculators.loan.placeholderRate" min="0" step="0.01">
                        </div>
                        
                        <div class="form-group">
                            <label for="loanTerm" data-translate="calculators.loan.loanTerm">Loan Term (years)</label>
                            <input type="number" id="loanTerm" placeholder="Enter loan term" data-translate-attr="calculators.loan.placeholderTerm" min="1">
                        </div>
                        
                        <button id="calculateBtn" class="calculate-btn" data-translate="calculators.loan.button">Calculate</button>
                    </div>
                    
                    <div class="results-section">
                        <h3 class="results-header" data-translate="calculators.loan.results">Loan Results</h3>
                        
                        <div class="chart-container">
                            <canvas id="loanChart"></canvas>
                            <div class="chart-placeholder" data-translate="calculators.loan.chartPlaceholder">Chart will be displayed after calculation</div>
                        </div>
                        
                        <div class="chart-legend">
                            <div class="legend-item">
                                <span class="legend-color principal"></span>
                                <span data-translate="calculators.loan.principal">Principal</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color interest"></span>
                                <span data-translate="calculators.loan.interest">Interest</span>
                            </div>
                        </div>
                        
                        <div class="results-summary">
                            <span id="monthlyPayment" class="monthly-amount">$0.00</span>
                            <span class="monthly-label" data-translate="calculators.loan.monthlyPayment">Monthly Payment</span>
                        </div>
                        
                        <div class="results-details">
                            <div class="result-row">
                                <span class="result-label" data-translate="calculators.loan.totalPayment">Total Payment</span>
                                <span id="totalPayment" class="result-value">$0.00</span>
                            </div>
                            <div class="result-row">
                                <span class="result-label" data-translate="calculators.loan.totalInterest">Total Interest</span>
                                <span id="totalInterest" class="result-value">$0.00</span>
                            </div>
                            <div class="result-row">
                                <span class="result-label" data-translate="calculators.loan.loanAmountLabel">Loan Amount</span>
                                <span id="loanAmountDisplay" class="result-value">$0.00</span>
                            </div>
                            <div class="result-row">
                                <span class="result-label" data-translate="calculators.loan.interestRateLabel">Interest Rate</span>
                                <span id="interestRateDisplay" class="result-value">0.00%</span>
                            </div>
                            <div class="result-row">
                                <span class="result-label" data-translate="calculators.loan.loanTermLabel">Loan Term</span>
                                <span id="loanTermDisplay" class="result-value">0 years</span>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- SEO Content Section -->
                <section class="explanation-section">
                    <h2 class="explanation-title">Understanding Your Loan Calculations</h2>
                    <div class="explanation-text">
                        <p>Our loan calculator helps you make informed financial decisions by providing accurate estimates of your loan payments. Whether you're planning to take out a personal loan, auto loan, or mortgage, this calculator gives you a clear picture of your financial commitment.</p>
                        
                        <h3>Key Features of Our Loan Calculator</h3>
                        <ul>
                            <li>Calculate monthly payment amounts for any loan term</li>
                            <li>Determine total interest paid over the life of the loan</li>
                            <li>View total payment amount including principal and interest</li>
                            <li>Instant results with no account required</li>
                            <li>Free to use and mobile-friendly</li>
                        </ul>

                        <h3>Understanding Loan Factors</h3>
                        <p>Understanding your monthly payments is crucial for budgeting and financial planning. Our calculator takes into account three main factors:</p>
                        <ul>
                            <li><strong>Principal Amount:</strong> The initial amount you borrow</li>
                            <li><strong>Interest Rate:</strong> The annual interest rate charged on your loan</li>
                            <li><strong>Loan Term:</strong> The length of time you have to repay the loan</li>
                        </ul>

                        <p>By adjusting these variables, you can explore different scenarios and find a loan structure that fits your budget. Remember that actual loan terms may vary based on factors such as credit score, lender requirements, and market conditions.</p>
                    </div>
                </section>
            </div>
            
            <div class="sidebar-column">
                <!-- Other Calculators -->
                <div class="other-calculators">
                    <h3>Other Calculators</h3>
                    <ul class="calculator-list">
                        <li><a href="../loan-calculator/loan-calculator.html">Loan Calculator</a></li>
                        <li><a href="../Mortgage-Qualification-Calculator/mortgage-qualification.html">Mortgage Calculator</a></li>
                        <li><a href="../paycheck-calculator/paycheck-calculator.html">Paycheck Calculator</a></li>
                        <li><a href="../payoff-calculator/payoff-calculator.html">Debt Payoff Calculator</a></li>
                        <li><a href="../compound-interest-calculator/compound-interest.html">Compound Interest Calculator</a></li>
                        <li><a href="../investment-return-calculator/investment-return.html">Investment Return Calculator</a></li>
                        <li><a href="../dividend-calculator/dividend-calculator.html">Dividend Calculator</a></li>
                        <li><a href="../stock-return-calculator/stock-return.html">Stock Return Calculator</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-links">
                <a href="../privacy-policy.html">Privacy Policy</a>
                <a href="../terms.html">Terms</a>
                <a href="../about.html">About</a>
            </div>
            <div class="copyright">
                <p>Copyright © <span id="currentYear"></span> Calculator Tap. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Update current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        // DOM Elements
        const loanAmountInput = document.getElementById('loanAmount');
        const interestRateInput = document.getElementById('interestRate');
        const loanTermInput = document.getElementById('loanTerm');
        const calculateBtn = document.getElementById('calculateBtn');
        const monthlyPaymentElement = document.getElementById('monthlyPayment');
        const totalInterestElement = document.getElementById('totalInterest');
        const totalPaymentElement = document.getElementById('totalPayment');
        const loanAmountDisplay = document.getElementById('loanAmountDisplay');
        const interestRateDisplay = document.getElementById('interestRateDisplay');
        const loanTermDisplay = document.getElementById('loanTermDisplay');
        const chartPlaceholder = document.querySelector('.chart-placeholder');
        const currencySymbolElement = document.querySelector('.currency-symbol');
        
        // URL 경로에서 locale 감지
        const currentPath = window.location.pathname;
        const pathLang = currentPath.split('/').find(p => ['en', 'es', 'zh', 'ko', 'ja'].includes(p)) || 'en';
        
        // Locale별 통화 설정
        const currencyConfig = {
            en: { symbol: '$', currency: 'USD', locale: 'en-US' },
            ko: { symbol: '₩', currency: 'KRW', locale: 'ko-KR' },
            zh: { symbol: '¥', currency: 'CNY', locale: 'zh-CN' },
            es: { symbol: '$', currency: 'USD', locale: 'es-US' }, // 스페인어는 달러 사용 (필요시 EUR로 변경)
            ja: { symbol: '¥', currency: 'JPY', locale: 'ja-JP' }
        };
        
        const currentCurrency = currencyConfig[pathLang] || currencyConfig['en'];
        
        // 통화 기호 업데이트
        if (currencySymbolElement) {
            currencySymbolElement.textContent = currentCurrency.symbol;
        }
        
        // 라벨 텍스트에 통화 기호 추가
        const loanAmountLabel = document.querySelector('label[for="loanAmount"]');
        if (loanAmountLabel) {
            const baseText = loanAmountLabel.textContent.trim();
            // 이미 괄호가 있는지 확인하고, 없으면 추가
            if (!baseText.includes('(')) {
                loanAmountLabel.textContent = baseText + ` (${currentCurrency.symbol})`;
            } else {
                // 괄호가 있으면 괄호 안의 내용만 교체
                loanAmountLabel.textContent = baseText.replace(/\([^)]*\)/, `(${currentCurrency.symbol})`);
            }
        }
        
        // Format currency with locale
        const formatCurrency = (amount) => {
            return new Intl.NumberFormat(currentCurrency.locale, {
                style: 'currency',
                currency: currentCurrency.currency,
                minimumFractionDigits: currentCurrency.currency === 'JPY' || currentCurrency.currency === 'KRW' ? 0 : 2,
                maximumFractionDigits: currentCurrency.currency === 'JPY' || currentCurrency.currency === 'KRW' ? 0 : 2
            }).format(amount);
        };
        
        // Create the initial pie chart with sample data
        let loanChart;
        
        function createInitialChart() {
            const ctx = document.getElementById('loanChart').getContext('2d');
            
            // Sample data
            const samplePrincipal = 200000;
            const sampleInterest = 100000;
            
            loanChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Principal', 'Interest'],
                    datasets: [{
                        data: [samplePrincipal, sampleInterest],
                        backgroundColor: ['#3498db', '#e74c3c'],
                        borderColor: ['#fff', '#fff'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = samplePrincipal + sampleInterest;
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${label}: ${formatCurrency(value)} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    cutout: '75%'
                }
            });
            
            // Sample values display
            monthlyPaymentElement.textContent = formatCurrency(samplePrincipal / 360);
            loanAmountDisplay.textContent = formatCurrency(samplePrincipal);
            totalInterestElement.textContent = formatCurrency(sampleInterest);
            totalPaymentElement.textContent = formatCurrency(samplePrincipal + sampleInterest);
            interestRateDisplay.textContent = "3.5%";
            loanTermDisplay.textContent = "30 years";
            
            // Hide placeholder
            chartPlaceholder.style.display = 'none';
        }
        
        // Initialize the chart
        try {
            createInitialChart();
        } catch (e) {
            console.error('Error creating chart:', e);
            chartPlaceholder.textContent = '차트 초기화 오류';
        }
        
        // Update the chart with calculated values
        function updateChart(principal, interest) {
            if (loanChart) {
                loanChart.data.datasets[0].data = [principal, interest];
                
                // 차트 툴팁 포맷 업데이트
                if (loanChart.options.plugins && loanChart.options.plugins.tooltip) {
                    loanChart.options.plugins.tooltip.callbacks.label = function(context) {
                        const label = context.label || '';
                        const value = context.raw || 0;
                        const total = principal + interest;
                        const percentage = ((value / total) * 100).toFixed(1);
                        return `${label}: ${formatCurrency(value)} (${percentage}%)`;
                    };
                }
                
                loanChart.update();
            }
        }
        
        // Calculate loan
        const calculateLoan = () => {
            const loanAmount = parseNumber(loanAmountInput.value);
            const annualInterestRate = parseFloat(interestRateInput.value);
            const loanTermYears = parseFloat(loanTermInput.value);

            // Validate inputs
            if (isNaN(loanAmount) || isNaN(annualInterestRate) || isNaN(loanTermYears)) {
                alert('Please enter valid numbers for all fields');
                return;
            }

            // Convert annual interest rate to monthly and percentage to decimal
            const monthlyInterestRate = (annualInterestRate / 100) / 12;
            const numberOfPayments = loanTermYears * 12;

            // Calculate monthly payment using the formula: P * (r(1+r)^n) / ((1+r)^n - 1)
            let monthlyPayment;
            
            if (monthlyInterestRate === 0) {
                // Handle 0% interest case
                monthlyPayment = loanAmount / numberOfPayments;
            } else {
                monthlyPayment = loanAmount * 
                    (monthlyInterestRate * Math.pow(1 + monthlyInterestRate, numberOfPayments)) / 
                    (Math.pow(1 + monthlyInterestRate, numberOfPayments) - 1);
            }

            // Calculate total payment and interest
            const totalPayment = monthlyPayment * numberOfPayments;
            const totalInterest = totalPayment - loanAmount;

            // Update results
            monthlyPaymentElement.textContent = formatCurrency(monthlyPayment);
            totalInterestElement.textContent = formatCurrency(totalInterest);
            totalPaymentElement.textContent = formatCurrency(totalPayment);
            loanAmountDisplay.textContent = formatCurrency(loanAmount);
            interestRateDisplay.textContent = annualInterestRate + "%";
            loanTermDisplay.textContent = loanTermYears + (loanTermYears === 1 ? " year" : " years");
            
            // Update chart
            updateChart(loanAmount, totalInterest);
            
            // Hide placeholder if it's still visible
            chartPlaceholder.style.display = 'none';
        };

        // Add event listeners
        calculateBtn.addEventListener('click', calculateLoan);

        // Allow calculation on Enter key
        [loanAmountInput, interestRateInput, loanTermInput].forEach(input => {
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    calculateLoan();
                }
            });
        });

        // 숫자 포맷팅 함수 (세 자리마다 콤마)
        const formatNumber = (value) => {
            // 숫자가 아닌 문자 제거
            const numValue = value.toString().replace(/[^0-9]/g, '');
            if (!numValue) return '';
            // 세 자리마다 콤마 추가
            return parseInt(numValue, 10).toLocaleString(currentCurrency.locale, { maximumFractionDigits: 0 });
        };
        
        // 포맷팅된 숫자에서 숫자만 추출
        const parseNumber = (value) => {
            return parseFloat(value.toString().replace(/[^0-9.]/g, '')) || 0;
        };
        
        // 대출 금액 입력 필드 포맷팅
        loanAmountInput.addEventListener('input', (e) => {
            const cursorPosition = e.target.selectionStart;
            const originalValue = e.target.value;
            const formattedValue = formatNumber(originalValue);
            
            // 값이 변경된 경우만 업데이트
            if (originalValue !== formattedValue) {
                e.target.value = formattedValue;
                
                // 커서 위치 조정 (콤마 때문에 위치가 변경될 수 있음)
                const diff = formattedValue.length - originalValue.length;
                const newCursorPosition = Math.min(cursorPosition + diff, formattedValue.length);
                e.target.setSelectionRange(newCursorPosition, newCursorPosition);
            }
        });
        
        // 포커스 아웃 시 포맷팅 확정
        loanAmountInput.addEventListener('blur', (e) => {
            const numValue = parseNumber(e.target.value);
            if (numValue > 0) {
                e.target.value = formatNumber(numValue.toString());
            }
        });
        
        // 다른 입력 필드 검증 (이자율, 대출 기간)
        [interestRateInput, loanTermInput].forEach(input => {
            input.addEventListener('input', () => {
                // Remove any non-numeric characters except decimal point
                input.value = input.value.replace(/[^0-9.]/g, '');
                
                // Ensure only one decimal point
                if ((input.value.match(/\./g) || []).length > 1) {
                    input.value = input.value.slice(0, -1);
                }
            });
        });

        // 모바일 메뉴 스크립트 추가
        const hamburgerMenu = document.getElementById('hamburgerMenu');
        const mobileNav = document.getElementById('mobileNav');
        const closeMenu = document.getElementById('closeMenu');
        
        hamburgerMenu.addEventListener('click', () => {
            mobileNav.classList.add('active');
            document.body.style.overflow = 'hidden'; // 스크롤 방지
        });
        
        closeMenu.addEventListener('click', () => {
            mobileNav.classList.remove('active');
            document.body.style.overflow = ''; // 스크롤 복원
        });
        
        // 모바일 메뉴 링크 클릭 시 메뉴 닫기
        const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
        mobileNavLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileNav.classList.remove('active');
                document.body.style.overflow = '';
            });
        });
    </script>
</body>
</html> 